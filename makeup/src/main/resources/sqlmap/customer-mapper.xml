<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="customer.mapper">
	<select id="list" resultType="customer.CustomerVO">
		SELECT
			CUSTOMER_ID,
			CUSTOMER_NAME,
			CUSTOMER_SOCIALNUM,
			TO_CHAR(CUSTOMER_REGISTERDATE, 'YYYY-MM-DD HH24:MI:SS') CUSTOMER_REGISTERDATE
		FROM
			CUSTOMER
		ORDER BY
			CUSTOMER_REGISTERDATE DESC
	</select>
	
	<insert id="insert">
		INSERT INTO CUSTOMER
			(
			  CUSTOMER_ID
			, CUSTOMER_PW
			, CUSTOMER_NAME
			, CUSTOMER_SOCIALNUM
			, CUSTOMER_EMAIL
			, CUSTOMER_PHONE
			, CUSTOMER_POSTCODE
			, CUSTOMER_ADDRESS
			, CUSTOMER_DETAILADDRESS
			, CUSTOMER_REGISTERDATE
			)
		VALUES
			(
			  #{customer_id}
			, #{customer_pw}
			, #{customer_name}
			, #{customer_socialNum}
			, #{customer_email}
			, #{customer_phone}
			, #{customer_postCode}
			, #{customer_address}
			, #{customer_detailAddress}
			, SYSDATE
			)
	
	</insert>
	
	<select id="idUsable" resultType="integer">
		SELECT
			COUNT(*) CNT
		FROM
			CUSTOMER
		WHERE
			CUSTOMER_ID = #{CUSTOMER_ID}
	</select>
	
	<select id="detail" resultType="customer.CustomerVO">
		SELECT
			*
		FROM
			CUSTOMER
		WHERE
			CUSTOMER_ID = #{CUSTOMER_ID}
	</select>
	
	<update id="update">
			UPDATE
				CUSTOMER
			SET
				  CUSTOMER_PW = #{customer_pw}
				, CUSTOMER_NAME = #{customer_name}
				, CUSTOMER_SOCIALNUM = #{customer_socialNum}
				, CUSTOMER_PHONE = #{customer_phone}
				, CUSTOMER_EMAIL = #{customer_email}
				, CUSTOMER_POSTCODE = #{customer_postCode}
				, CUSTOMER_ADDRESS = #{customer_address}
				, CUSTOMER_DETAILADDRESS = #{customer_detailAddress}
			WHERE
				CUSTOMER_ID = #{customer_id}
				
	</update>
</mapper>